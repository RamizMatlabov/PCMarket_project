# Инструкция по развертыванию на Vercel и Render.com

## Проблема

Если вы развернули бэкенд на Render.com, а фронтенд на Vercel, но получаете ошибку "Сервер не доступен", это означает, что фронтенд пытается подключиться к `localhost:8000` вместо URL вашего бэкенда на Render.com.

## Решение

### 1. Настройка переменных окружения в Vercel

1. Откройте ваш проект на [Vercel](https://vercel.com)
2. Перейдите в **Settings** → **Environment Variables**
3. Добавьте новую переменную:
   - **Name**: `NEXT_PUBLIC_API_URL`
   - **Value**: URL вашего бэкенда на Render.com (например: `https://your-backend.onrender.com`)
4. **Важно**: Убедитесь, что переменная добавлена для всех окружений (Production, Preview, Development)
5. После добавления переменной, пересоберите проект (Redeploy)

### 2. Настройка переменных окружения локально

Если вы хотите протестировать локально с бэкендом на Render.com:

1. Создайте файл `.env.local` в папке `frontend/`
2. Добавьте в него:
   ```
   NEXT_PUBLIC_API_URL=https://your-backend.onrender.com
   ```
3. Перезапустите dev сервер: `npm run dev`

### 3. Проверка URL бэкенда на Render.com

1. Откройте ваш проект на [Render.com](https://render.com)
2. Убедитесь, что сервис запущен и доступен
3. Скопируйте URL сервиса (должен быть вида `https://your-backend.onrender.com`)
4. Убедитесь, что URL не содержит `/` в конце

### 4. Настройка CORS на бэкенде

Убедитесь, что ваш Django бэкенд настроен для работы с фронтендом на Vercel:

В `backend/backend/settings.py` добавьте:

```python
CORS_ALLOWED_ORIGINS = [
    "https://your-frontend.vercel.app",
    "http://localhost:3000",  # для локальной разработки
]

# Или для всех доменов (не рекомендуется для продакшена):
# CORS_ALLOW_ALL_ORIGINS = True
```

### 5. Проверка работы

После настройки переменных окружения:

1. Пересоберите проект на Vercel
2. Откройте консоль браузера (F12)
3. Проверьте, что запросы идут на правильный URL (Render.com, а не localhost)
4. Если видите ошибки CORS, проверьте настройки CORS на бэкенде

## Примеры

### Для локальной разработки:
```
NEXT_PUBLIC_API_URL=http://localhost:8000
```

### Для продакшена (Render.com):
```
NEXT_PUBLIC_API_URL=https://pcmarket-project.onrender.com
```

## Важные замечания

1. **Переменные окружения с префиксом `NEXT_PUBLIC_`** доступны в браузере. Не используйте их для секретных данных (API ключи, пароли и т.д.)

2. **После изменения переменных окружения** на Vercel необходимо пересобрать проект

3. **URL бэкенда** должен быть доступен из интернета (не localhost)

4. **Проверьте CORS настройки** на бэкенде, чтобы разрешить запросы с домена Vercel

